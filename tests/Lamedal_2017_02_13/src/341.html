<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>d:\dev\lamedal\trunk\lamedalcore\lamedalcore\lib\io\io_stateinfo\io_stateinfo_rw1.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;

namespace LamedalCore.lib.IO.IO_StateInfo
{
    public sealed class IO_StateInfo_RW1 : IO_StateInfo_RW
    {
        private readonly LamedalCore_ _lamed = LamedalCore_.Instance;
        private IO_StateInfo_lvl1 _state;

        /// &lt;summary&gt;Gets the state.&lt;/summary&gt;
        public IO_StateInfo_lvl1 State
        {
            get { return _state; }
        }

        /// &lt;summary&gt;Gets or sets the name of the file. When file is set and it exists, contents will be loaded.&lt;/summary&gt;
        public override string FileName
        {
            set
            {
                base.FileName = value;
                if (_jsonStr == &quot;&quot;) _state = new IO_StateInfo_lvl1();   // This line need unit testing
                else _state = _lamed.lib.IO.Json.Convert_ToType&lt;IO_StateInfo_lvl1&gt;(_jsonStr);
            }
        }

        /// &lt;summary&gt;Sync an object with the data&lt;/summary&gt;
        /// &lt;param name=&quot;keyName&quot;&gt;The key name. If the key is not found, nothing will be set.&lt;/param&gt;
        /// &lt;param name=&quot;Object&quot;&gt;The object.&lt;/param&gt;
        /// &lt;param name=&quot;defaultFile&quot;&gt;The default file.&lt;/param&gt;
        public void Data_Load(string keyName, object Object, string defaultFile = &quot;StateInfo_lvl1.json&quot;)
        {
            var info = this;
            if (info.FileName == &quot;&quot;) info.InitialiseFile(defaultFile);
            var personStr = info.State.Data_Get(keyName);
            if (personStr != &quot;&quot;) _lamed.lib.IO.Json.Object_Set(Object, personStr);  // Name &amp; Surname
        }

        /// &lt;summary&gt;Save the data to file.&lt;/summary&gt;
        /// &lt;param name=&quot;keyName&quot;&gt;Name of the key.&lt;/param&gt;
        /// &lt;param name=&quot;person&quot;&gt;The person.&lt;/param&gt;
        /// &lt;param name=&quot;overwrite&quot;&gt;if set to &lt;c&gt;true&lt;/c&gt; [overwrite].&lt;/param&gt;
        public void Data_Save(string keyName, object person, bool overwrite = false)
        {
            var info = this;
            var personStr = _lamed.lib.IO.Json.Convert_FromObject(person);
            info.State.Data_Add(keyName, personStr);
            info.Save(overwrite);
        }

        public override string ToString()
        {
            string json = _state.ToString();
            return json;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[25,37,25,70,0],[16,17,16,18,1],[16,19,16,33,1],[16,34,16,35,1],[23,13,23,14,1],[24,17,24,39,1],[25,17,25,36,1],[26,22,26,94,1],[27,13,27,14,1],[35,9,35,10,1],[36,13,36,29,1],[37,13,37,37,1],[37,38,37,71,1],[38,13,38,58,1],[39,13,39,33,1],[39,34,39,83,1],[40,9,40,10,1],[47,9,47,10,1],[48,13,48,29,1],[49,13,49,75,1],[50,13,50,53,1],[51,13,51,34,1],[52,9,52,10,1],[55,9,55,10,1],[56,13,56,45,1],[57,13,57,25,1],[58,9,58,10,1],[10,9,10,70,1]]);
    </script>
  </body>
</html>