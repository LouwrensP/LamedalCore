<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>d:\dev\lamedal\trunk\lamedalcore\lamedalcore\lib\console1\console_io.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Threading.Tasks;
using LamedalCore.domain.Attributes;
using LamedalCore.domain.Enumerals;
using LamedalCore.zz;
using static System.String;

namespace LamedalCore.lib.Console1
{
    public sealed class Console_IO
    {
        private readonly LamedalCore_ _lamed = LamedalCore_.Instance;

        /// &lt;summary&gt;
        /// Provide introduction message abouts this project.
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public string About_()
        {
            var about = 
&quot; _        _______  _______  _______  ______   _______  _&quot;.NL()+        
&quot;( \\      (  ___  )(       )(  ____ \\(  __  \\ (  ___  )( \\&quot;.NL()+       
&quot;| (      | (   ) || () () || (    \\/| (  \\  )| (   ) || (&quot;.NL()+       
&quot;| |      | (___) || || || || (__    | |   ) || (___) || | _____&quot;.NL()+ 
&quot;| |      |  ___  || |(_)| ||  __)   | |   | ||  ___  || |(_____)&quot;.NL()+
&quot;| |      | (   ) || |   | || (      | |   ) || (   ) || |&quot;.NL()+       
&quot;| (____/\\| )   ( || )   ( || (____/\\| (__/  )| )   ( || (____/\\&quot;.NL()+ 
&quot;(_______/|/     \\||/     \\|(_______/(______/ |/     \\|(_______/&quot;.NL()+ 
&quot;&quot;.NL()+                                                                
&quot; _       _________ ______&quot;.NL()+    
&quot;( \\      \\__   __/(  ___ \\&quot;.NL()+   
&quot;| (         ) (   | (   ) )&quot;.NL()+  
&quot;| |         | |   | (__/ /&quot;.NL()+   
&quot;| |         | |   |  __ (&quot;.NL()+    
&quot;| |         | |   | (  \\ \\&quot;.NL()+   
&quot;| (____/\\___) (___| )___) )_&quot;.NL()+ 
&quot;(_______/\\_______/|/ \\___/(_)&quot;;
            return about;
        }

        /// &lt;summary&gt;
        /// Shows  a hello world message
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public string About_HelloWorld_()
        {
            //Cell test;

            var hello = &quot;Hello, I am LamedaL. I am your helper library for open source cross platform applications.&quot;;
            return hello;
        }

        /// &lt;summary&gt;Shows a message abouts the Lamedal library.&lt;/summary&gt;
        public void About_WriteLine()
        {
            var about = About_();
            Console.WriteLine(about);
        }

        /// &lt;summary&gt;Shows a Hello World console message.&lt;/summary&gt;
        public void About_HelloWorld_WriteLine()
        {
            var hello = About_HelloWorld_();
            Console.WriteLine(hello);
        }

        /// &lt;summary&gt;Reads the line and show the default value&lt;/summary&gt;
        /// &lt;param name=&quot;question&quot;&gt;The question.&lt;/param&gt;
        /// &lt;param name=&quot;defaultValue&quot;&gt;The defaultValue.&lt;/param&gt;
        [Test_IgnoreCoverage(enTestIgnore.FrontendCode)]
        public void ReadLine(string question, ref string defaultValue)
        {
            //var info = defaultValue.GetType().GetTypeInfo();
            //if (question.zContains_All(&quot;{&quot;, &quot;}&quot;)) question = question.zFormat(defaultValue);
            Console.Write(question + &quot; [&quot; + defaultValue +&quot;]&quot;);
            var readLn = Console.ReadLine();
            if (readLn != &quot;&quot;) defaultValue = readLn;
        }

        /// &lt;summary&gt;Menu from the in array optional array.&lt;/summary&gt;
        /// &lt;param name=&quot;menuItems&quot;&gt;The in array optional array&lt;/param&gt;
        /// &lt;returns&gt;int&lt;/returns&gt;
        [Test_IgnoreCoverage(enTestIgnore.FrontendCode)]
        public int Menu_Interactive(params string[] menuItems)
        {
            // Check parameters
            if (TestCode1==false) if (menuItems.Length &gt; Console.WindowHeight) throw new Exception(&quot;Too many items in the array to display&quot;);

            bool loopComplete = false;
            var cursorBottom = 0;
            int selectedItem = 0;
            int cursorTop = 0;
            if (TestCode1 == false)
            {
                Console.CursorVisible = false;
                cursorTop = Console.CursorTop;
            }
            // Drawing phase
            while (!loopComplete)
            {//This for loop prints the array out
                if (TestCode1 == false) System.Console.SetCursorPosition(0, cursorTop);  // Reset the cursor to the top of the screen
                for (int ii = 0; ii &lt; menuItems.Length; ii++)
                {
                    if (ii == selectedItem)
                         WriteLine_HighLight(menuItems[ii], true);  // This section is what highlights the selected item
                    else WriteLine_HighLight(menuItems[ii]);        // This section is what prints unselected items
                }
                if (TestCode1 == false) cursorBottom = System.Console.CursorTop;

                ConsoleKeyInfo key;
                if (TestCode1)
                {
                    // Allow testing code to run this method
                    key = new ConsoleKeyInfo(&#39; &#39;, ConsoleKey.Enter, false, false, false);
                }
                else key = System.Console.ReadKey(true);

                Menu_ReadKey1(key, menuItems.Length, ref selectedItem, ref loopComplete);
            }
            if (TestCode1 == false)
            {
                System.Console.SetCursorPosition(0, cursorBottom); // Set the cursor just after the menu so that the program can continue after the menu
                System.Console.CursorVisible = true;
            }
            TestCode1 = false;

            return selectedItem + 1;
        }
        public static bool TestCode1 = false;

        [Test_IgnoreCoverage(enTestIgnore.FrontendCode)]
        public void Menu_ReadKey1(ConsoleKeyInfo consoleKeyInfo, int menuItemsCount, ref int selectedItem, ref bool loopComplete)
        {
            switch (consoleKeyInfo.Key)
            {
                //react to input
                case ConsoleKey.UpArrow:
                    if (selectedItem &gt; 0) selectedItem--;
                    else selectedItem = (menuItemsCount - 1);
                    break;

                case ConsoleKey.DownArrow:
                    if (selectedItem &lt; (menuItemsCount - 1)) selectedItem++;
                    else selectedItem = 0;
                    break;

                case ConsoleKey.Enter:
                    loopComplete = true;
                    break;
            }
        }

        /// &lt;summary&gt;Writes the line to the console with a highlight if applicable.&lt;/summary&gt;
        /// &lt;param name=&quot;line&quot;&gt;The line.&lt;/param&gt;
        /// &lt;param name=&quot;highlight&quot;&gt;if set to &lt;c&gt;true&lt;/c&gt; [highlight].&lt;/param&gt;
        public void WriteLine_HighLight(string line, bool highlight = false)
        {
            if (highlight)
            {
                System.Console.BackgroundColor = ConsoleColor.Gray;
                System.Console.ForegroundColor = ConsoleColor.Black;
            }
            System.Console.WriteLine(&quot;-&quot; + line);

            if (highlight) System.Console.ResetColor();
        }

        /// &lt;summary&gt;Formats the values to table format.&lt;/summary&gt;
        /// &lt;param name=&quot;reset&quot;&gt;if set to &lt;c&gt;true&lt;/c&gt; [reset].&lt;/param&gt;
        /// &lt;param name=&quot;values&quot;&gt;The values.&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        public string Table_FormatStr(bool reset = false, params string[] values)
        {
            var result = &quot;&quot;;

            // Safety checks
            var test = FormatStr(values.Length - 1);
            if (_formatStr.Contains(test) == false &amp;&amp; reset == false) reset = Table_FormatReset(out result);
            // Format header -&gt; add extra space in for header values
            var valueList = (reset) ? values.Select(x =&gt; &quot; &quot; + x + &quot; &quot;).ToArray() : values.ToArray();

            if (reset)
            {
                // Calculate the widths &amp; build the format string
                _formatStr = &quot;&quot;;
                int ii = 0;
                foreach (var val in valueList)
                {
                    _formatStr += FormatStr(ii, val.Length);
                    ii++;
                }
                _formatStr += &quot;|&quot;;
            }

            // Print the value out
            result += Format(_formatStr, valueList);

            // Add line for headings
            if (reset)
            {
                var line = Environment.NewLine;
                for (int ii = 0; ii &lt; result.Length; ii++)
                {
                    line += &quot;-&quot;;
                }
                result += line;
            }

            return result;
        }

        [Test_IgnoreCoverage(enTestIgnore.FrontendCode)]
        private bool Table_FormatReset(out string result)
        {
            result = Environment.NewLine; // This is an auto reset. Add extra line
            var reset = true;
            return reset;
        }

        private string _formatStr = &quot;&quot;;

        /// &lt;summary&gt;
        /// Create the format string
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;index&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;length&quot;&gt;&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        private string FormatStr(int index, int length = 0)
        {
            var result = &quot;|{&quot; + index + &quot;,&quot;;
            if (length == 0) return result;

            result += &quot;-&quot; + length + &quot;}&quot;;
            return result;
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[181,71,181,109,0],[22,9,22,10,1],[23,13,40,35,1],[41,13,41,26,1],[42,9,42,10,1],[49,9,49,10,1],[52,13,52,118,1],[53,13,53,26,1],[54,9,54,10,1],[58,9,58,10,1],[59,13,59,34,1],[60,13,60,38,1],[61,9,61,10,1],[65,9,65,10,1],[66,13,66,45,1],[67,13,67,38,1],[68,9,68,10,1],[160,9,160,10,1],[161,13,161,27,1],[162,13,162,14,1],[163,17,163,68,1],[164,17,164,69,1],[165,13,165,14,1],[166,13,166,50,1],[168,13,168,27,1],[168,28,168,56,1],[169,9,169,10,1],[176,9,176,10,1],[177,13,177,29,1],[180,13,180,53,1],[181,13,181,70,1],[183,13,183,58,1],[183,71,183,102,1],[185,13,185,23,1],[186,13,186,14,1],[188,17,188,33,1],[189,17,189,28,1],[190,17,190,24,1],[190,37,190,46,1],[190,26,190,33,1],[191,17,191,18,1],[192,21,192,61,1],[193,21,193,26,1],[194,17,194,18,1],[190,34,190,36,1],[195,17,195,35,1],[196,13,196,14,1],[199,13,199,53,1],[202,13,202,23,1],[203,13,203,14,1],[204,17,204,48,1],[205,22,205,32,1],[206,17,206,18,1],[207,21,207,33,1],[208,17,208,18,1],[205,54,205,58,1],[205,34,205,52,1],[209,17,209,32,1],[210,13,210,14,1],[212,13,212,27,1],[213,9,213,10,1],[232,9,232,10,1],[233,13,233,45,1],[234,13,234,29,1],[234,30,234,44,1],[236,13,236,42,1],[237,13,237,27,1],[238,9,238,10,1],[15,9,15,70,1],[223,9,223,40,1],[132,9,132,46,1],[183,58,183,71,1]]);
    </script>
  </body>
</html>